{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/octagon.svg","../src/img/close_button.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const searchImgParams = {\n  key: '42207525-2f984868f7881b9b68563ca8c',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  q: '',\n  page: 1,\n  per_page: 15,\n};\n\nexport async function pixabayRequest() {\n  const pixabayRequestResult = await axios.get('https://pixabay.com/api/', {\n    params: searchImgParams,\n  });\n  return pixabayRequestResult.data;\n}\n","export default \"__VITE_ASSET__de411352__\"","export default \"__VITE_ASSET__d65044ed__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport octagon from '../img/octagon.svg';\nimport closeButton from '../img/close_button.svg';\n\nexport function createMarkup(\n  arr,\n  loaderElem,\n  lightboxInstance,\n  markupContainer,\n  stateCheckbox\n) {\n  loaderElem.classList.remove('is-visible');\n  markupContainer.innerHTML += arr\n    .map(\n      item =>\n        `<li class='gallery-item'><a class='gallery-link' href=${item.largeImageURL}><img class='gallery-img' src=${item.webformatURL} width='360' height='200' alt=${item.tags}><span class=\"img-loader\"></span></a><ul class='desc-wrapper'><li class='desc-text'><h3>Likes</h3><p>${item.likes}</p></li><li class='desc-text'><h3>Views</h3><p>${item.views}</p></li><li class='desc-text'><h3>Comments</h3><p>${item.comments}</p></li><li class='desc-text'><h3>Downloads</h3><p>${item.downloads}</p></li></ul></li>`\n    )\n    .join('');\n  console.log(stateCheckbox);\n\n  if (stateCheckbox) {\n    document\n      .querySelectorAll('.gallery-item')\n      .forEach(item => item.classList.add('light-theme'));\n  }\n  lightboxInstance.refresh();\n  checkRenderImg();\n}\n\nexport function createPopUp(message, loaderElem, input) {\n  iziToast.show({\n    class: 'my-iziToast',\n    backgroundColor: '#EF4040',\n    messageColor: '#fff',\n    messageSize: 16,\n    messageLineHeight: '24',\n    message: message,\n    position: 'topRight',\n    iconUrl: octagon,\n    progressBarColor: '#B51B1B;',\n    close: false,\n    transitionIn: 'bounceInLeft',\n    transitionOut: 'fadeOutRight',\n    buttons: [\n      [\n        `<button type=\"button\" style=\"background-color: #EF4040; padding-top: 15px; padding-bottom: 15px\"><img src=${closeButton}></button>`,\n        function (instance, toast) {\n          instance.hide({ transitionOut: 'fadeOutRight' }, toast);\n        },\n      ],\n    ],\n    onOpening: function (instance, toast) {\n      loaderElem.classList.remove('is-visible');\n      input.addEventListener(\n        'input',\n        () => {\n          iziToast.hide(\n            {\n              transitionOut: 'fadeOutRight',\n            },\n            toast\n          );\n        },\n        { once: true }\n      );\n    },\n  });\n}\n\nexport function checkRenderImg() {\n  const galleryImg = document.querySelectorAll('.gallery-img');\n  galleryImg.forEach(item =>\n    item.addEventListener('load', () => {\n      item.nextSibling.classList.add('img-loader-hidden');\n    })\n  );\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport * as pixabayApi from './js/pixabay-api';\nimport * as renderFn from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst input = form.elements.text;\n\nconst galleryContainer = document.querySelector('.gallery-container');\nconst loaderText = document.querySelector('.loader');\nconst loaderButton = document.querySelector('.loader-button');\nconst buttonUp = document.querySelector('.button-up');\n\nlet totalPageQuantity;\nlet imgCollection;\nlet stateCheckbox;\nconst viewGallery = new SimpleLightbox('.gallery-link');\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  loaderButton.removeEventListener('click', onButtonClick);\n  loaderButton.classList.remove('is-visible');\n  galleryContainer.innerHTML = '';\n\n  if (!input.value.trim()) {\n    renderFn.createPopUp('Search field can not be empty', loaderText, input);\n  } else {\n    loaderText.classList.add('is-visible');\n    pixabayApi.searchImgParams.page = 1;\n    pixabayApi.searchImgParams.q = input.value;\n    try {\n      imgCollection = (await pixabayApi.pixabayRequest()).hits;\n      const totalImgQuantity = (await pixabayApi.pixabayRequest()).totalHits;\n\n      if (!imgCollection.length) {\n        renderFn.createPopUp(\n          'Sorry, there are no images matching your search query. Please, try again!',\n          loaderText,\n          input\n        );\n      } else {\n        totalPageQuantity = Math.ceil(\n          totalImgQuantity / pixabayApi.searchImgParams.per_page\n        );\n        renderFn.createMarkup(\n          imgCollection,\n          loaderText,\n          viewGallery,\n          galleryContainer,\n          JSON.parse(localStorage.getItem(localStorageKey))\n        );\n\n        if (totalPageQuantity > 1) {\n          loaderButton.classList.add('is-visible');\n          loaderButton.addEventListener('click', onButtonClick);\n          pixabayApi.searchImgParams.page += 1;\n        }\n      }\n    } catch (error) {\n      renderFn.createPopUp(\n        'Oops! Something went wrong. Try again!',\n        loaderText,\n        input\n      );\n      console.log(error);\n    }\n  }\n  form.reset();\n});\n\nasync function onButtonClick(e) {\n  loaderButton.classList.remove('is-visible');\n  loaderText.classList.add('is-visible');\n  try {\n    imgCollection = (await pixabayApi.pixabayRequest()).hits;\n    renderFn.createMarkup(\n      imgCollection,\n      loaderText,\n      viewGallery,\n      galleryContainer,\n      JSON.parse(localStorage.getItem(localStorageKey))\n    );\n    pixabayApi.searchImgParams.page += 1;\n    if (pixabayApi.searchImgParams.page < totalPageQuantity) {\n      loaderButton.classList.add('is-visible');\n    } else {\n      loaderButton.removeEventListener('click', onButtonClick);\n      renderFn.createPopUp(\n        \"We're sorry, but you've reached the end of search results.\",\n        loaderText,\n        input\n      );\n    }\n\n    scrollWindowOnBtnClick();\n  } catch (error) {\n    renderFn.createPopUp(\n      'Oops! Something went wrong. Try again!',\n      loaderText,\n      input\n    );\n    console.log(error);\n  }\n}\n\nfunction scrollWindowOnBtnClick() {\n  const elemHeight = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect().height;\n  const valueForScrollWindow = Math.ceil(elemHeight * 2.5);\n  window.scrollBy({ top: valueForScrollWindow, behavior: 'smooth' });\n}\n\nconst observer = new IntersectionObserver(entries => {\n  if (entries[0].intersectionRatio === 0) {\n    buttonUp.classList.add('is-visible');\n    buttonUp.addEventListener('click', scrollOnClick);\n  } else {\n    buttonUp.classList.remove('is-visible');\n    buttonUp.removeEventListener('click', scrollOnClick);\n  }\n});\n\nobserver.observe(form);\n\nfunction scrollOnClick() {\n  form.scrollIntoView({ behavior: 'smooth' });\n}\n\n//TODO =======================================================================================================================\n//TODO =======================================================================================================================\nconst localStorageKey = 'light-theme';\nconst checkbox = document.querySelector('.checkbox');\n\ncheckbox.addEventListener('change', () => {\n  localStorage.setItem(localStorageKey, JSON.stringify(checkbox.checked));\n  const elemForChangeTheme = document.querySelectorAll('.dark-theme');\n  if (checkbox.checked) {\n    document.body.classList.add('body-light');\n    elemForChangeTheme.forEach(item => item.classList.add('light-theme'));\n    document\n      .querySelectorAll('.gallery-item')\n      .forEach(item => item.classList.add('light-theme'));\n  } else {\n    document.body.classList.remove('body-light');\n    elemForChangeTheme.forEach(item => item.classList.remove('light-theme'));\n    document\n      .querySelectorAll('.gallery-item')\n      .forEach(item => item.classList.remove('light-theme'));\n  }\n});\n\nwindow.addEventListener('load', () => {\n  checkbox.checked = JSON.parse(localStorage.getItem(localStorageKey));\n  const elemForChangeTheme = document.querySelectorAll('.dark-theme');\n  if (checkbox.checked) {\n    document.body.classList.add('body-light');\n    elemForChangeTheme.forEach(item => item.classList.add('light-theme'));\n    document\n      .querySelectorAll('.gallery-item')\n      .forEach(item => item.classList.add('light-theme'));\n  } else {\n    document.body.classList.remove('body-light');\n    elemForChangeTheme.forEach(item => item.classList.remove('light-theme'));\n    document\n      .querySelectorAll('.gallery-item')\n      .forEach(item => item.classList.remove('light-theme'));\n  }\n});\n"],"names":["searchImgParams","pixabayRequest","axios","octagon","closeButton","createMarkup","arr","loaderElem","lightboxInstance","markupContainer","stateCheckbox","item","checkRenderImg","createPopUp","message","input","iziToast","instance","toast","form","galleryContainer","loaderText","loaderButton","buttonUp","totalPageQuantity","imgCollection","viewGallery","SimpleLightbox","e","onButtonClick","renderFn.createPopUp","pixabayApi.searchImgParams","pixabayApi.pixabayRequest","totalImgQuantity","renderFn.createMarkup","localStorageKey","error","scrollWindowOnBtnClick","elemHeight","valueForScrollWindow","observer","entries","scrollOnClick","checkbox","elemForChangeTheme"],"mappings":"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"}