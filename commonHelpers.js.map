{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/octagon.svg","../src/img/close_button.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nasync function pixabayRequest(url, searchParams) {\n  const pixabayRequestResult = await axios.get(url, {\n    params: searchParams,\n  });\n  return pixabayRequestResult.data;\n}\nexport default pixabayRequest;\n","export default \"__VITE_ASSET__de411352__\"","export default \"__VITE_ASSET__d65044ed__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport octagon from '../img/octagon.svg';\nimport closeButton from '../img/close_button.svg';\n\nexport function createMarkup(\n  arr,\n  loaderElem,\n  lightboxInstance,\n  markupContainer,\n  stateCheckbox\n) {\n  loaderElem.classList.add('is-visible');\n  if (stateCheckbox) {\n    loaderElem.classList.add('text-loader-light-theme');\n  }\n  markupContainer.innerHTML += arr\n    .map(\n      item =>\n        `<li class='gallery-item'><a class='gallery-link' href=${item.largeImageURL}><img class='gallery-img' src=${item.webformatURL} width='360' height='200' alt=${item.tags}><span class=\"img-loader\"></span></a><ul class='desc-wrapper'><li class='desc-text'><h3>Likes</h3><p>${item.likes}</p></li><li class='desc-text'><h3>Views</h3><p>${item.views}</p></li><li class='desc-text'><h3>Comments</h3><p>${item.comments}</p></li><li class='desc-text'><h3>Downloads</h3><p>${item.downloads}</p></li></ul></li>`\n    )\n    .join('');\n\n  if (stateCheckbox) {\n    document\n      .querySelectorAll('.gallery-item')\n      .forEach(item => item.classList.add('light-theme'));\n    document\n      .querySelectorAll('.img-loader')\n      .forEach(item => item.classList.add('img-loader-light-theme'));\n  }\n  loaderElem.classList.remove('is-visible');\n  lightboxInstance.refresh();\n  checkRenderImg();\n}\n\nexport function createPopUp(message, loaderElem, input) {\n  iziToast.show({\n    class: 'my-iziToast',\n    backgroundColor: '#EF4040',\n    messageColor: '#fff',\n    messageSize: 16,\n    messageLineHeight: '24',\n    message: message,\n    position: 'topRight',\n    iconUrl: octagon,\n    progressBarColor: '#B51B1B;',\n    close: false,\n    transitionIn: 'bounceInLeft',\n    transitionOut: 'fadeOutRight',\n    buttons: [\n      [\n        `<button type=\"button\" style=\"background-color: #EF4040; padding-top: 15px; padding-bottom: 15px\"><img src=${closeButton}></button>`,\n        function (instance, toast) {\n          instance.hide({ transitionOut: 'fadeOutRight' }, toast);\n        },\n      ],\n    ],\n    onOpening: function (instance, toast) {\n      loaderElem.classList.remove('is-visible');\n      input.addEventListener(\n        'input',\n        () => {\n          iziToast.hide(\n            {\n              transitionOut: 'fadeOutRight',\n            },\n            toast\n          );\n        },\n        { once: true }\n      );\n    },\n  });\n}\n\nexport function checkRenderImg() {\n  const galleryImg = document.querySelectorAll('.gallery-img');\n  galleryImg.forEach(item =>\n    item.addEventListener('load', () => {\n      item.nextSibling.classList.add('img-loader-hidden');\n    })\n  );\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport requestFn from './js/pixabay-api';\nimport * as renderFn from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst input = form.elements.text;\nconst galleryContainer = document.querySelector('.gallery-container');\nconst textLoader = document.querySelector('.text-loader');\nconst loaderButton = document.querySelector('.loader-button');\nconst buttonUp = document.querySelector('.button-up');\nconst checkbox = document.querySelector('.checkbox');\n\nconst elemForChangeTheme = document.querySelectorAll('.dark-theme');\nconst localStorageKey = 'light-theme';\nconst URL = 'https://pixabay.com/api/';\nconst searchImgParams = {\n  key: '42207525-2f984868f7881b9b68563ca8c',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  q: '',\n  page: 1,\n  per_page: 15,\n};\nlet totalPageQuantity;\nlet imgCollection;\n\nconst viewGallery = new SimpleLightbox('.gallery-link');\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  loaderButton.removeEventListener('click', onButtonClick);\n  loaderButton.classList.remove('is-visible');\n  galleryContainer.innerHTML = '';\n\n  if (!input.value.trim()) {\n    renderFn.createPopUp('Search field can not be empty', textLoader, input);\n  } else {\n    textLoader.classList.add('is-visible');\n    searchImgParams.page = 1;\n    searchImgParams.q = input.value;\n    try {\n      imgCollection = (await requestFn(URL, searchImgParams)).hits;\n      const totalImgQuantity = (await requestFn(URL, searchImgParams))\n        .totalHits;\n\n      if (!imgCollection.length) {\n        renderFn.createPopUp(\n          'Sorry, there are no images matching your search query. Please, try again!',\n          textLoader,\n          input\n        );\n      } else {\n        totalPageQuantity = Math.ceil(\n          totalImgQuantity / searchImgParams.per_page\n        );\n        renderFn.createMarkup(\n          imgCollection,\n          textLoader,\n          viewGallery,\n          galleryContainer,\n          checkbox.checked\n        );\n\n        if (totalPageQuantity > 1) {\n          loaderButton.classList.add('is-visible');\n          loaderButton.addEventListener('click', onButtonClick);\n          searchImgParams.page += 1;\n        }\n      }\n    } catch (error) {\n      renderFn.createPopUp(\n        'Oops! Something went wrong. Try again!',\n        textLoader,\n        input\n      );\n      console.log(error);\n    }\n  }\n  form.reset();\n});\n\nasync function onButtonClick(e) {\n  loaderButton.classList.remove('is-visible');\n  textLoader.classList.add('is-visible');\n  try {\n    imgCollection = (await requestFn(URL, searchImgParams)).hits;\n    renderFn.createMarkup(\n      imgCollection,\n      textLoader,\n      viewGallery,\n      galleryContainer,\n      checkbox.checked\n    );\n    searchImgParams.page += 1;\n    if (searchImgParams.page < totalPageQuantity) {\n      loaderButton.classList.add('is-visible');\n    } else {\n      loaderButton.removeEventListener('click', onButtonClick);\n      renderFn.createPopUp(\n        \"We're sorry, but you've reached the end of search results.\",\n        textLoader,\n        input\n      );\n    }\n    scrollWindowOnBtnClick();\n  } catch (error) {\n    renderFn.createPopUp(\n      'Oops! Something went wrong. Try again!',\n      textLoader,\n      input\n    );\n    console.log(error);\n  }\n}\n\nfunction scrollWindowOnBtnClick() {\n  const elemHeight = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect().height;\n  const valueForScrollWindow = Math.ceil(elemHeight * 2.5);\n  window.scrollBy({ top: valueForScrollWindow, behavior: 'smooth' });\n}\n\nconst observer = new IntersectionObserver(entries => {\n  if (entries[0].intersectionRatio === 0) {\n    buttonUp.classList.add('is-visible');\n    buttonUp.addEventListener('click', scrollOnClick);\n  } else {\n    buttonUp.classList.remove('is-visible');\n    buttonUp.removeEventListener('click', scrollOnClick);\n  }\n});\n\nobserver.observe(form);\n\nfunction scrollOnClick() {\n  form.scrollIntoView({ behavior: 'smooth' });\n}\n\ncheckbox.addEventListener('change', changeTheme);\n\nwindow.addEventListener('load', themeAtLoading);\n\nfunction changeTheme() {\n  localStorage.setItem(localStorageKey, JSON.stringify(checkbox.checked));\n  const galleryElem = document.querySelectorAll('.gallery-item');\n  const imgLoader = document.querySelectorAll('.img-loader');\n  if (checkbox.checked) {\n    document.body.classList.add('body-light-theme');\n    elemForChangeTheme.forEach(item => item.classList.add('light-theme'));\n    galleryElem.forEach(item => item.classList.add('light-theme'));\n    imgLoader.forEach(item => item.classList.add('img-loader-light-theme'));\n    textLoader.classList.add('text-loader-light-theme');\n  } else {\n    document.body.classList.remove('body-light-theme');\n    elemForChangeTheme.forEach(item => item.classList.remove('light-theme'));\n    galleryElem.forEach(item => item.classList.remove('light-theme'));\n    imgLoader.forEach(item => item.classList.remove('img-loader-light-theme'));\n    textLoader.classList.remove('text-loader-light-theme');\n  }\n}\nfunction themeAtLoading() {\n  checkbox.checked = JSON.parse(localStorage.getItem(localStorageKey));\n  if (checkbox.checked) {\n    document.body.classList.add('body-light-theme');\n    elemForChangeTheme.forEach(item => item.classList.add('light-theme'));\n  }\n}\n"],"names":["pixabayRequest","url","searchParams","axios","octagon","closeButton","createMarkup","arr","loaderElem","lightboxInstance","markupContainer","stateCheckbox","item","checkRenderImg","createPopUp","message","input","iziToast","instance","toast","form","galleryContainer","textLoader","loaderButton","buttonUp","checkbox","elemForChangeTheme","localStorageKey","URL","searchImgParams","totalPageQuantity","imgCollection","viewGallery","SimpleLightbox","e","onButtonClick","renderFn.createPopUp","requestFn","totalImgQuantity","renderFn.createMarkup","error","scrollWindowOnBtnClick","elemHeight","valueForScrollWindow","observer","entries","scrollOnClick","changeTheme","themeAtLoading","galleryElem","imgLoader"],"mappings":"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"}