import{a as S,i as v,S as x}from"./assets/vendor-483db976.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const m of o.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}})();const a={key:"42207525-2f984868f7881b9b68563ca8c",image_type:"photo",orientation:"horizontal",safesearch:!0,q:"",page:1,per_page:15};async function h(){return(await S.get("https://pixabay.com/api/",{params:a})).data}const q="/goit-js-hw-12/assets/octagon-7962080a.svg",R="/goit-js-hw-12/assets/close_button-de5d3efc.svg";function w(s,t,c,n){t.classList.remove("is-visible"),n.innerHTML+=s.map(e=>`<li class='gallery-item'><a class='gallery-link' href=${e.largeImageURL}><img class='gallery-img' src=${e.webformatURL} width='360' height='200' alt=${e.tags}><span class="img-loader"></span></a><ul class='desc-wrapper'><li class='desc-text'><h3>Likes</h3><p>${e.likes}</p></li><li class='desc-text'><h3>Views</h3><p>${e.views}</p></li><li class='desc-text'><h3>Comments</h3><p>${e.comments}</p></li><li class='desc-text'><h3>Downloads</h3><p>${e.downloads}</p></li></ul></li>`).join(""),c.refresh(),k()}function u(s,t,c){v.show({class:"my-iziToast",backgroundColor:"#EF4040",messageColor:"#fff",messageSize:16,messageLineHeight:"24",message:s,position:"topRight",iconUrl:q,progressBarColor:"#B51B1B;",close:!1,transitionIn:"bounceInLeft",transitionOut:"fadeOutRight",buttons:[[`<button type="button" style="background-color: #EF4040; padding-top: 15px; padding-bottom: 15px"><img src=${R}></button>`,function(n,e){n.hide({transitionOut:"fadeOutRight"},e)}]],onOpening:function(n,e){t.classList.remove("is-visible"),c.addEventListener("input",()=>{v.hide({transitionOut:"fadeOutRight"},e)},{once:!0})}})}function k(){document.querySelectorAll(".gallery-img").forEach(t=>t.addEventListener("load",()=>{t.nextSibling.classList.add("img-loader-hidden")}))}const g=document.querySelector(".form"),r=g.elements.text,f=document.querySelector(".gallery-container"),i=document.querySelector(".loader"),l=document.querySelector(".loader-button"),p=document.querySelector(".button-up");let y,d;const O=new x(".gallery-link");g.addEventListener("submit",async s=>{if(s.preventDefault(),l.removeEventListener("click",b),l.classList.remove("is-visible"),f.innerHTML="",!r.value.trim())u("Search field can not be empty",i,r);else{i.classList.add("is-visible"),a.page=1,a.q=r.value;try{d=(await h()).hits;const t=(await h()).totalHits;d.length?(y=Math.ceil(t/a.per_page),w(d,i,O,f),y>1&&(l.classList.add("is-visible"),l.addEventListener("click",b),a.page+=1)):u("Sorry, there are no images matching your search query. Please, try again!",i,r)}catch(t){u("Oops! Something went wrong. Try again!",i,r),console.log(t)}}g.reset()});async function b(s){l.classList.remove("is-visible"),i.classList.add("is-visible");try{d=(await h()).hits,w(d,i,O,f),a.page+=1,a.page<y?l.classList.add("is-visible"):(l.removeEventListener("click",b),u("We're sorry, but you've reached the end of search results.",i,r)),E()}catch(t){u("Oops! Something went wrong. Try again!",i,r),console.log(t)}}function E(){const s=document.querySelector(".gallery-item").getBoundingClientRect().height,t=Math.ceil(s*2.5);window.scrollBy({top:t,behavior:"smooth"})}const I=new IntersectionObserver(s=>{s[0].intersectionRatio===0?(p.classList.add("is-visible"),p.addEventListener("click",L)):(p.classList.remove("is-visible"),p.removeEventListener("click",L))});I.observe(g);function L(){g.scrollIntoView({behavior:"smooth"})}
//# sourceMappingURL=commonHelpers.js.map
