import{a as O,i as S,S as k}from"./assets/vendor-483db976.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const a={key:"42207525-2f984868f7881b9b68563ca8c",image_type:"photo",orientation:"horizontal",safesearch:!0,q:"",page:1,per_page:15};async function p(){return(await O.get("https://pixabay.com/api/",{params:a})).data}const x="/goit-js-hw-12/assets/octagon-7962080a.svg",I="/goit-js-hw-12/assets/close_button-de5d3efc.svg";function E(o,e,n,l,t){e.classList.remove("is-visible"),l.innerHTML+=o.map(s=>`<li class='gallery-item'><a class='gallery-link' href=${s.largeImageURL}><img class='gallery-img' src=${s.webformatURL} width='360' height='200' alt=${s.tags}><span class="img-loader"></span></a><ul class='desc-wrapper'><li class='desc-text'><h3>Likes</h3><p>${s.likes}</p></li><li class='desc-text'><h3>Views</h3><p>${s.views}</p></li><li class='desc-text'><h3>Comments</h3><p>${s.comments}</p></li><li class='desc-text'><h3>Downloads</h3><p>${s.downloads}</p></li></ul></li>`).join(""),console.log(t),t&&document.querySelectorAll(".gallery-item").forEach(s=>s.classList.add("light-theme")),n.refresh(),R()}function d(o,e,n){S.show({class:"my-iziToast",backgroundColor:"#EF4040",messageColor:"#fff",messageSize:16,messageLineHeight:"24",message:o,position:"topRight",iconUrl:x,progressBarColor:"#B51B1B;",close:!1,transitionIn:"bounceInLeft",transitionOut:"fadeOutRight",buttons:[[`<button type="button" style="background-color: #EF4040; padding-top: 15px; padding-bottom: 15px"><img src=${I}></button>`,function(l,t){l.hide({transitionOut:"fadeOutRight"},t)}]],onOpening:function(l,t){e.classList.remove("is-visible"),n.addEventListener("input",()=>{S.hide({transitionOut:"fadeOutRight"},t)},{once:!0})}})}function R(){document.querySelectorAll(".gallery-img").forEach(e=>e.addEventListener("load",()=>{e.nextSibling.classList.add("img-loader-hidden")}))}const m=document.querySelector(".form"),r=m.elements.text,b=document.querySelector(".gallery-container"),i=document.querySelector(".loader"),c=document.querySelector(".loader-button"),h=document.querySelector(".button-up");let v,u;const q=new k(".gallery-link");m.addEventListener("submit",async o=>{if(o.preventDefault(),c.removeEventListener("click",L),c.classList.remove("is-visible"),b.innerHTML="",!r.value.trim())d("Search field can not be empty",i,r);else{i.classList.add("is-visible"),a.page=1,a.q=r.value;try{u=(await p()).hits;const e=(await p()).totalHits;u.length?(v=Math.ceil(e/a.per_page),E(u,i,q,b,JSON.parse(localStorage.getItem(y))),v>1&&(c.classList.add("is-visible"),c.addEventListener("click",L),a.page+=1)):d("Sorry, there are no images matching your search query. Please, try again!",i,r)}catch(e){d("Oops! Something went wrong. Try again!",i,r),console.log(e)}}m.reset()});async function L(o){c.classList.remove("is-visible"),i.classList.add("is-visible");try{u=(await p()).hits,E(u,i,q,b,JSON.parse(localStorage.getItem(y))),a.page+=1,a.page<v?c.classList.add("is-visible"):(c.removeEventListener("click",L),d("We're sorry, but you've reached the end of search results.",i,r)),C()}catch(e){d("Oops! Something went wrong. Try again!",i,r),console.log(e)}}function C(){const o=document.querySelector(".gallery-item").getBoundingClientRect().height,e=Math.ceil(o*2.5);window.scrollBy({top:e,behavior:"smooth"})}const B=new IntersectionObserver(o=>{o[0].intersectionRatio===0?(h.classList.add("is-visible"),h.addEventListener("click",w)):(h.classList.remove("is-visible"),h.removeEventListener("click",w))});B.observe(m);function w(){m.scrollIntoView({behavior:"smooth"})}const y="light-theme",g=document.querySelector(".checkbox");g.addEventListener("change",()=>{localStorage.setItem(y,JSON.stringify(g.checked));const o=document.querySelectorAll(".dark-theme");g.checked?(document.body.classList.add("body-light"),o.forEach(e=>e.classList.add("light-theme")),document.querySelectorAll(".gallery-item").forEach(e=>e.classList.add("light-theme"))):(document.body.classList.remove("body-light"),o.forEach(e=>e.classList.remove("light-theme")),document.querySelectorAll(".gallery-item").forEach(e=>e.classList.remove("light-theme")))});window.addEventListener("load",()=>{g.checked=JSON.parse(localStorage.getItem(y));const o=document.querySelectorAll(".dark-theme");g.checked?(document.body.classList.add("body-light"),o.forEach(e=>e.classList.add("light-theme")),document.querySelectorAll(".gallery-item").forEach(e=>e.classList.add("light-theme"))):(document.body.classList.remove("body-light"),o.forEach(e=>e.classList.remove("light-theme")),document.querySelectorAll(".gallery-item").forEach(e=>e.classList.remove("light-theme")))});
//# sourceMappingURL=commonHelpers.js.map
