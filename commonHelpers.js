import{a as O,i as v,S}from"./assets/vendor-483db976.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}})();const a={key:"42207525-2f984868f7881b9b68563ca8c",image_type:"photo",orientation:"horizontal",safesearch:!0,q:"",page:1,per_page:15};async function m(){return(await O.get("https://pixabay.com/api/",{params:a})).data}const x="/goit-js-hw-12/assets/octagon-7962080a.svg",q="/goit-js-hw-12/assets/close_button-de5d3efc.svg";function L(s,t,c,r){t.classList.remove("is-visible"),r.innerHTML+=s.map(e=>`<li class='gallery-item'><a class='gallery-link' href=${e.largeImageURL}><img class='gallery-img' src=${e.webformatURL} width='360' height='200' alt=${e.tags}><span class="img-loader"></span></a><ul class='desc-wrapper'><li class='desc-text'><h3>Likes</h3><p>${e.likes}</p></li><li class='desc-text'><h3>Views</h3><p>${e.views}</p></li><li class='desc-text'><h3>Comments</h3><p>${e.comments}</p></li><li class='desc-text'><h3>Downloads</h3><p>${e.downloads}</p></li></ul></li>`).join(""),c.refresh(),R()}function u(s,t,c){v.show({class:"my-iziToast",backgroundColor:"#EF4040",messageColor:"#fff",messageSize:16,messageLineHeight:"24",message:s,position:"topRight",iconUrl:x,progressBarColor:"#B51B1B;",close:!1,transitionIn:"bounceInLeft",transitionOut:"fadeOutRight",buttons:[[`<button type="button" style="background-color: #EF4040; padding-top: 15px; padding-bottom: 15px"><img src=${q}></button>`,function(r,e){r.hide({transitionOut:"fadeOutRight"},e)}]],onOpening:function(r,e){t.classList.remove("is-visible"),c.addEventListener("input",()=>{v.hide({transitionOut:"fadeOutRight"},e)},{once:!0})}})}function R(){document.querySelectorAll(".gallery-img").forEach(t=>t.addEventListener("load",()=>{t.nextSibling.classList.add("img-loader-hidden")}))}const g=document.querySelector(".form"),n=g.elements.text,h=document.querySelector(".gallery-container"),i=document.querySelector(".loader"),l=document.querySelector(".loader-button"),f=document.querySelector(".button-up");let y,d;const w=new S(".gallery-link");g.addEventListener("submit",async s=>{if(s.preventDefault(),l.removeEventListener("click",b),l.classList.remove("is-visible"),h.innerHTML="",!n.value.trim())u("Search field can not be empty",i,n);else{i.classList.add("is-visible"),a.page=1,a.q=n.value;try{d=(await m()).hits;const t=(await m()).totalHits;d.length?(y=Math.ceil(t/a.per_page),L(d,i,w,h),y>1&&(l.classList.add("is-visible"),l.addEventListener("click",b),a.page+=1)):u("Sorry, there are no images matching your search query. Please, try again!",i,n)}catch(t){u("Oops! Something went wrong. Try again!",i,n),console.log(t)}}g.reset()});async function b(s){l.classList.remove("is-visible"),i.classList.add("is-visible");try{d=(await m()).hits,L(d,i,w,h),a.page+=1,a.page<y?l.classList.add("is-visible"):(l.removeEventListener("click",b),u("We're sorry, but you've reached the end of search results.",i,n)),E()}catch(t){u("Oops! Something went wrong. Try again!",i,n),console.log(t)}}function E(){const s=document.querySelector(".gallery-item").getBoundingClientRect().height,t=Math.ceil(s*2.5);window.scrollBy({top:t,behavior:"smooth"})}const I=new IntersectionObserver(s=>{s[0].intersectionRatio===0?f.classList.add("is-visible"):f.classList.remove("is-visible")});I.observe(g);f.addEventListener("click",()=>g.scrollIntoView({behavior:"smooth"}));
//# sourceMappingURL=commonHelpers.js.map
